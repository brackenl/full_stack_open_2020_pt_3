(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(13),c=t.n(r),u=(t(19),t(2)),i={color:"green",fontSize:"1.2rem",background:"lightgray",border:"3px solid green",width:"80%"},l={color:"red",fontSize:"1.2rem",background:"lightgray",border:"3px solid red",width:"80%"},m=function(e){return e.notification?o.a.createElement("div",{style:e.notification.error?l:i},o.a.createElement("h1",{className:"notification"},e.notification.message)):null},d=function(e){return o.a.createElement("div",null,"filter: ",o.a.createElement("input",{onChange:e.handleFilterChange,value:e.filter}))},f=function(e){return o.a.createElement("form",{onSubmit:e.handleSubmit},o.a.createElement("h2",null,"Add new"),o.a.createElement("div",null,"name: ",o.a.createElement("input",{onChange:e.handleNameChange,value:e.newName})),o.a.createElement("div",{style:{marginTop:"5px"}},"number: ",o.a.createElement("input",{onChange:e.handleNumChange,value:e.newNum})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},s=function(e){var n=e.person,t=e.handleDelete;return o.a.createElement("div",{className:"number"},o.a.createElement("p",null,n.name," ",n.number),o.a.createElement("button",{onClick:function(){return t(n.id)}},"Delete"))},h=function(e){var n=e.filteredPersons,t=e.handleDelete;return o.a.createElement("div",null,o.a.createElement("h2",null,"Numbers"),n.map((function(e){return o.a.createElement(s,{key:e.id,person:e,handleDelete:t})})))},b=t(3),p=t.n(b),g="/api/persons",E=function(){return p.a.get(g).then((function(e){return e.data}))},v=function(e){return p.a.post(g,e).then((function(e){return e.data}))},w=function(e,n){return p.a.put("".concat(g,"/").concat(e),n).then((function(e){return e.data}))},k=function(e){return p.a.delete("".concat(g,"/").concat(e)).then((function(e){return e.data}))},C=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),i=Object(u.a)(c,2),l=i[0],s=i[1],b=Object(a.useState)(""),p=Object(u.a)(b,2),g=p[0],C=p[1],j=Object(a.useState)(""),N=Object(u.a)(j,2),O=N[0],S=N[1],y=Object(a.useState)(null),D=Object(u.a)(y,2),T=D[0],x=D[1];Object(a.useEffect)((function(){P()}),[]);var P=function(){E().then((function(e){r(e)}))},z=t.filter((function(e){return e.name.toLowerCase().includes(O.toLowerCase())}));return o.a.createElement("div",null,o.a.createElement(m,{notification:T}),o.a.createElement("h2",null,"Phonebook"),o.a.createElement(d,{handleFilterChange:function(e){S(e.target.value)},filter:O}),o.a.createElement(f,{handleSubmit:function(e){e.preventDefault();var n={name:l,number:g},a=t.filter((function(e){return e.name===n.name}));a.length>0?window.confirm("".concat(n.name," is already added to the phonebook. Update the number associated with this contact?"))&&w(a[0].id,n).then((function(e){P()})).then((function(e){x({message:"".concat(n.name," was updated in the phonebook"),error:!1}),setTimeout((function(){x(null)}),3e3)})).catch((function(e){console.log(e),x({message:"".concat(n.name," was not found in the phonebook"),error:!0}),setTimeout((function(){x(null)}),3e3)})):v(n).then((function(e){r(t.concat(e)),s(""),C("")})).then((function(e){x({message:"".concat(n.name," was added to the phonebook"),error:!1}),setTimeout((function(){x(null)}),3e3)})).catch((function(e){x({message:e.response.data.error.message,error:!0}),setTimeout((function(){x(null)}),3e3)}))},handleNumChange:function(e){C(e.target.value)},handleNameChange:function(e){s(e.target.value)},newName:l,newNum:g}),o.a.createElement(h,{filteredPersons:z,handleDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Do you really want to delete ".concat(n.name,"?"))&&k(e).then((function(n){r(t.filter((function(n){return n.id!==e})))}))}}))};c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(C,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.f12634e5.chunk.js.map